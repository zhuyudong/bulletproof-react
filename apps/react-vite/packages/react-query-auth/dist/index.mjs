import{useQuery as L,useMutation as c,useQueryClient as o}from"@tanstack/react-query";import a,{useCallback as y}from"react";function K(g){let{userFn:d,userKey:i=["authenticated-user"],loginFn:U,registerFn:F,logoutFn:m}=g,l=e=>L({queryKey:i,queryFn:d,...e}),C=e=>{let t=o(),u=y(r=>t.setQueryData(i,r),[t]);return c({mutationFn:U,...e,onSuccess:(r,...n)=>{var s;u(r),(s=e==null?void 0:e.onSuccess)==null||s.call(e,r,...n)}})},f=e=>{let t=o(),u=y(r=>t.setQueryData(i,r),[t]);return c({mutationFn:F,...e,onSuccess:(r,...n)=>{var s;u(r),(s=e==null?void 0:e.onSuccess)==null||s.call(e,r,...n)}})},Q=e=>{let t=o(),u=y(r=>t.setQueryData(i,r),[t]);return c({mutationFn:m,...e,onSuccess:(...r)=>{var n;u(null),(n=e==null?void 0:e.onSuccess)==null||n.call(e,...r)}})};function E({children:e,renderLoading:t,renderUnauthenticated:u,renderError:r=n=>a.createElement(a.Fragment,null,JSON.stringify(n))}){let{isSuccess:n,isFetched:s,status:S,data:O,error:h}=l();return n?u&&!O?u():a.createElement(a.Fragment,null,e):s?S==="error"?r(h):null:t()}return{useUser:l,useLogin:C,useRegister:f,useLogout:Q,AuthLoader:E}}export{K as configureAuth};
//# sourceMappingURL=index.mjs.map